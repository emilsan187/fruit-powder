<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Emil's Getränkepulver</title>
    <link rel="stylesheet" href="./styles.css">
    <script src="js/products.js" type="text/javascript"></script>
    <script src="js/main.js" type="text/javascript"></script>
  </head>
  <body>
    <div class="promo-bar">Kostenloser Versand ab 49€</div>

    <!-- Featured hero will be injected here by JS (one large product under the navbar) -->

    <header class="site-header">
      <div class="container header-inner">
        

        <nav class="main-nav">
          <a class="nav-link active" href="index.html">Start</a>
          <a class="nav-link" href="about.html">Über uns</a>
          <a class="nav-link" href="products.html">Produkte</a>
          <a class="nav-link" href="contact.html">Kontakt</a>
        </nav>
      </div>
    </header>

    <main>
      <section class="hero">
        <div class="container hero-inner">
          <div class="hero-left">
            <div class="pill">Fruchtig & Knallig</div>
            <h1>Welcome to Emil's Getränkepulver</h1>
            <p class="lead">Entdecke unsere leckeren, zuckerarmen Pulver für Drinks, Shakes und mehr — natürlich, bunt, lecker.</p>

            <div class="hero-ctas">
              <a href="products.html" class="btn btn-primary">Unsere Sorten</a>
              <a href="contact.html" class="btn btn-outline">Kontakt</a>
            </div>
          </div>

          
        </div>
      </section>
    
      <!-- gallery script removed; featured hero will be injected globally by js/main.js -->

      <section class="section preview">
        <div class="container">
          <div class="section-head">
            <h2>Unsere Produkte</h2>
          </div>

          <div id="productGrid" class="product-grid">
            <!-- Produkte werden via JS eingefügt -->
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="container footer-inner">
        <div>© <strong>Emil's Getränkepulver</strong></div>
        <div class="small muted">Folge uns: <a class="link" href="#">Instagram</a></div>
        <a class="nav-link" href="impress.html">Impressum</a>
      </div>
    </footer>
    <script>
      // Fülle das Hero-Produkt mit dem ersten featured Produkt (Bestseller). Falls keines vorhanden, verwende das erste Produkt.
      (function(){
        try {
          const heroEl = document.getElementById('heroProduct');
          if (!heroEl || typeof PRODUCTS === 'undefined') return;
          const featured = PRODUCTS.find(p => p.featured) || PRODUCTS[0];
          if (!featured) return;

          // Update swatch/bg
          const swatch = heroEl.querySelector('.hero-swatch');
          if (swatch) swatch.style.background = `linear-gradient(135deg, ${featured.gradient[0]}, ${featured.gradient[1]})`;

          // Badge
          const badge = heroEl.querySelector('.product-badge-top');
          if (badge) badge.textContent = featured.isNew ? 'Neu' : 'Bestseller';

          // Title & desc
          const title = heroEl.querySelector('.hero-product-title');
          if (title) title.textContent = featured.name;
          const desc = heroEl.querySelector('.hero-product-desc');
          if (desc) desc.textContent = featured.description;

          // CTA link
          const btn = document.getElementById('heroProductBtn');
          if (btn) btn.href = `products.html#${featured.id}`;
        } catch (e) {
          console.warn('Hero product script error', e);
        }
      })();
    </script>
    <script>
      // Show a temporary thank-you banner when redirected from checkout
      document.addEventListener('DOMContentLoaded', () => {
        try {
          const raw = localStorage.getItem('orderThankYou');
          if (!raw) return;
          const data = JSON.parse(raw);
          // build banner
          const banner = document.createElement('div');
          banner.className = 'thankyou-banner card';
          banner.innerHTML = `
            <div class="container" style="display:flex;align-items:center;justify-content:space-between;gap:12px;">
              <div style="font-weight:800">Vielen Dank, ${data.name || ''}! Deine Bestellung (${data.id}) wurde erhalten.</div>
              <div style="display:flex;gap:8px;align-items:center">
                <a class="btn btn-primary" href="products.html">Weiter einkaufen</a>
                <button id="dismissThank" class="btn btn-outline">Schließen</button>
              </div>
            </div>
          `;

          const header = document.querySelector('.site-header');
          if (header && header.parentNode) {
            header.insertAdjacentElement('afterend', banner);
          } else {
            document.body.insertAdjacentElement('afterbegin', banner);
          }

          // auto-dismiss after 8s
          const remover = () => banner.remove();
          setTimeout(remover, 8000);

          const btn = document.getElementById('dismissThank');
          if (btn) btn.addEventListener('click', () => banner.remove());

          // remove payload so banner doesn't reappear
          localStorage.removeItem('orderThankYou');
        } catch (e) {
          console.warn('thank-you banner error', e);
        }
      });
    </script>
  </body>
</html>
